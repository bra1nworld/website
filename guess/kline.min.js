function refreshEcharts(t,e,a,i){e[1].length>121&&(e[1].splice(121,1),e[2].splice(121,1),e[3].splice(121,1));var n,o,l,s,r=1*e[0],p=[],d=e[2],x=e[3],c=0,y=0,h=0,m=0;weekday=["日","一","二","三","四","五","六"],r=1*r.toFixed(2);var f=autoTimeline("9:30","11:30"),u=autoTimeline("13:00","15:00");f.splice(f.length-1,1),u[0]="13:00";for(var F=f.concat(u),g=0;g<e[1].length;g++)1*e[1][g]>0&&p.push(e[1][g]);o=(1*Math.max.apply(Math,p)).toFixed(2),n=(1*Math.min.apply(Math,p)).toFixed(2),o-r>=r-n?n=2*r-o:o=2*r-n,c=(o-n)/4,l=((Math.min.apply(Math,p)-r)/r*100).toFixed(2),(s=((Math.max.apply(Math,p)-r)/r*100).toFixed(2))-0>=0-l?l=-s:s=-l,h=(s-l)/4;for(var b=d.length,g=0;g<b;g++)d[g]=(d[g]/1e4).toFixed(2),x[g]=(x[g]/1e8).toFixed(2);max2LY=Math.max.apply(Math,d).toFixed(2),m=max2LY/2;var L=echarts.init(document.getElementById(a)),v=echarts.init(document.getElementById(i));option={title:{text:t,top:"8%",left:"10%",textStyle:{color:"#ABABAB",fontSize:14,fontWeight:"normal"}},graphic:{type:"image",id:"logo",right:"11%",top:"17%",z:-10,style:{image:"../img/xiaohe.png",width:100,height:30}},legend:{data:["价格"],top:"8%",textStyle:{color:"#fff"}},tooltip:{trigger:"axis",position:function(t,e,a){return e[0].name.split(":")[0]<12?[573,60]:[80,60]},backgroundColor:"#fff",textStyle:{color:"black"},extraCssText:"backgroundColor:#fff;border:1px solid #fff;border-radius:0",formatter:function(t){function e(t){return t>0?"#FF0000":"#00FF00"}var a=new Date;return todays=a.getFullYear()+"/"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"/"+(a.getDate()<10?"0"+a.getDate():a.getDate()),t[0].name&&t[0].name.length>0?"<span >"+option.title.text+"<br />"+todays+"/"+weekday[a.getDay()]+" "+t[0].name+'<br /><span class="klineFL">'+t[0].seriesName+'</span><span class="klineFR" style="color:'+e(t[0].data-r)+'">'+(1*t[0].data).toFixed(2)+'</span><br /><span class="klineFL">涨跌</span><span class="klineFR" style="color:'+e(t[0].data-r)+'">'+(t[0].data-r).toFixed(2)+"("+((t[0].data-r)/r*100).toFixed(2)+'%)</span><br /><span class="klineFL">成交</span><span class="klineFR">'+d[t[0].dataIndex]+"万手</span></span>":""}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,axisLabel:{interval:59},splitLine:{show:!0,interval:29,lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#ffffff"}},data:F},{type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#ffffff"}},data:""}],yAxis:[{type:"value",scale:!0,min:n,max:o,splitLine:{show:!0,lineStyle:{type:"dashed"}},splitNumber:3,interval:c,axisLabel:{formatter:function(t){return y++,3==y?void 0:t.toFixed(2)},textStyle:{color:function(t){return t=(1*t.split(",").join("")).toFixed(2),t<r?"#00EE76":t>r?"#FF4040":void 0}}},axisLine:{lineStyle:{color:"#BBFFFF"}},axisTick:{show:!1}},{type:"value",scale:!0,min:l,max:s,splitNumber:3,interval:h,splitLine:{show:!1},axisLine:{lineStyle:{color:"#BBFFFF"}},axisLabel:{formatter:function(t){return t.toFixed(2)+"%"},textStyle:{color:function(t){return t.split(",").join("")<0?"#00EE76":"#FF4040"}}},axisTick:{show:!1}}],series:[{name:"价格",itemStyle:{normal:{color:"#5CACEE"}},lineStyle:{normal:{width:1}},animation:!1,smooth:!0,type:"line",areaStyle:{normal:{color:"#C6E2FF"}},data:p,markLine:{silent:!0,label:{normal:{position:"start"}},data:[{yAxis:r}]}}]},L.setOption(option),option2={calculable:!0,xAxis:[{type:"category",boundaryGap:!1,axisLabel:{show:!1,interval:59},axisTick:{show:!1},axisLine:{lineStyle:{color:"#ABABAB"}},data:F}],yAxis:[{type:"value",splitLine:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#ABABAB"}},min:0,max:max2LY,splitNumber:1,interval:m,axisLabel:{formatter:"{value}",textStyle:{color:function(t){if((t=(1*t.split(",").join("")).toFixed(2))==max2LY)return"#ABABAB"}}}},{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"#ABABAB"}},axisTick:{show:!1},axisLabel:{show:!1}}],series:[{name:"交易次数(万)",itemStyle:{normal:{color:function(t){var a;return 0==t.dataIndex?e[1][0]>=e[0]?a="#EE6363":e[1][0]<e[0]&&(a="#00EE76"):e[1][t.dataIndex]>=e[1][t.dataIndex-1]?a="#EE6363":e[1][t.dataIndex]<e[1][t.dataIndex-1]&&(a="#00EE76"),a}}},barWidth:1,barGap:"50%",barCategoryGap:"50%",type:"bar",animation:!1,data:d},{name:"交易总额(亿)",type:"line",animation:!1,lineStyle:{normal:{width:1,color:"#51a3d5"}},yAxisIndex:1,data:x}]},v.setOption(option2),echarts.connect([L,v])}function autoTimeline(t,e){for(var a=[],i=1*t.split(":")[0],n=1*t.split(":")[1],o=1*e.split(":")[0],l=1*e.split(":")[1],s=i;s<=o;s++)for(var t=s==i?n:"0",e=s==o?l:"59",r=t;r<=e;r++)r=r<10?"0"+r:r,a.push(s+":"+r);return a}